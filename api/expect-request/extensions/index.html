<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.25.1" />

  <title>ExpectRequest Extensions &middot; Expected.Request</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow-night-eighties.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://wright-development.github.io/Expected.Request/img/favicon.ico" type="image/x-icon" />

  
  

  <style>
    pre {
        overflow: hidden !important;
    }    
</style>
<style>
    pre {
        overflow: hidden !important;
    }
    
    .comment-form {
        font: 95% Arial, Helvetica, sans-serif;
        max-width: 400px;
        margin: 10px auto;
        padding: 16px;
        background: #F7F7F7;
    }

    .comment-form h1 {
        background: #02A854;
        padding: 20px 0;
        font-size: 140%;
        font-weight: 300;
        text-align: center;
        color: #fff;
        margin: -16px -16px 16px -16px;
    }

    .comment-form input[type="text"],
    .comment-form input[type="date"],
    .comment-form input[type="datetime"],
    .comment-form input[type="email"],
    .comment-form input[type="number"],
    .comment-form input[type="search"],
    .comment-form input[type="time"],
    .comment-form input[type="url"],
    .comment-form textarea,
    .comment-form select {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        width: 100%;
        background: #fff;
        margin-bottom: 4%;
        border: 1px solid #ccc;
        padding: 3%;
        color: #555;
        font: 95% Arial, Helvetica, sans-serif;
    }

    .comment-form input[type="text"]:focus,
    .comment-form input[type="date"]:focus,
    .comment-form input[type="datetime"]:focus,
    .comment-form input[type="email"]:focus,
    .comment-form input[type="number"]:focus,
    .comment-form input[type="search"]:focus,
    .comment-form input[type="time"]:focus,
    .comment-form input[type="url"]:focus,
    .comment-form textarea:focus,
    .comment-form select:focus {
        box-shadow: 0 0 5px #02A854;
        padding: 3%;
        border: 1px solid #02A854;
    }

    .comment-form button[type="submit"],
    .comment-form button[type="button"] {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        width: 100%;
        padding: 3%;
        background: #02A854;
        border-bottom: 2px solid #25B46B;
        border-top-style: none;
        border-right-style: none;
        border-left-style: none;
        color: #fff;
    }

    .comment-form button[type="submit"]:hover,
    .comment-form button[type="button"]:hover {
        background: #49C285;
    }

    .comment-form button[type="submit"]:disabled,
    .comment-form button[type="button"]:disabled {
        background: lightgrey;
        border-bottom: grey;
        
    }

</style>
<style>
     
@import url(//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css);
 
.comment-list .row {
background: #F7F7F7;
padding: 0px 25px;
padding-top: 5px;
padding-bottom: 15px;
margin: 25px 0;
}
.comment-list .panel .panel-heading {
padding: 4px 15px;
position: absolute;
border:none;
 
border-top-right-radius:0px;
top: 1px;
}
.comment-list .panel .panel-heading.right {
border-right-width: 0px;
 
border-top-left-radius:0px;
right: 16px;
}
.comment-list .panel .panel-heading .panel-body {
padding-top: 6px;
}
.comment-list figcaption {
 
word-wrap: break-word;
}
 
@media (min-width: 768px) {
.comment-list .arrow:after, .comment-list .arrow:before {
content: "";
position: absolute;
width: 0;
height: 0;
border-style: solid;
border-color: transparent;
}
.comment-list .panel.arrow.left:after, .comment-list .panel.arrow.left:before {
border-left: 0;
}
 
 
.comment-list .panel.arrow.left:before {
left: 0px;
top: 30px;
 
border-right-color: inherit;
border-width: 16px;
}
 
.comment-list .panel.arrow.left:after {
left: 1px;
top: 31px;
 
border-right-color: #FFFFFF;
border-width: 15px;
}
 
 
.comment-list .panel.arrow.right:before {
right: -16px;
top: 30px;
 
border-left-color: inherit;
border-width: 16px;
}
 
.comment-list .panel.arrow.right:after {
right: -14px;
top: 31px;
 
border-left-color: #FFFFFF;
border-width: 15px;
}
}
.comment-list .comment-post {
margin-top: 6px;
}
</style>

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/request/">Request</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/expect-request/">Expect</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/done-request/">Done</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/content-converter/">ContentConverter</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/wright-development/Expected.Request">View On GitHub</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/">My Blog</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/develop_wright" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/darrius-wright" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/wright-development" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>Wright Development &copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>ExpectRequest Extensions</h1>
  <h2></h2>
</div>
<div class="content">
  

<h2 id="map-extensions">Map Extensions</h2>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; Map&lt;T&gt;(this IExpectRequest expect, Action&lt;T&gt; retrieveObject);
Task&lt;IExpectRequest&gt; Map&lt;T&gt;(this IExpectRequest expect, Action&lt;T&gt; expectedAction, IContentConverter&lt;T&gt; converter)
</code></pre>

<p><strong>Map</strong> does exactly what the method name implies, it maps the HttpReponseMessage&rsquo;s content into the object type specified. Then using the Action that the caller provides supplies the type.</p>

<h2 id="expect-extensions">Expect Extensions</h2>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; Expect&lt;T&gt;(this IExpectRequest expect, Func&lt;T,Task&gt; taskFunc, string assertMessage = null);
Task&lt;IExpectRequest&gt; Expect&lt;T&gt;(this IExpectRequest expect, Func&lt;T,Task&gt; taskFunc, IContentConverter&lt;T&gt; converter, string assertMessage = null);

Task&lt;IExpectRequest&gt; Expect&lt;T&gt;(this IExpectRequest expect, Action&lt;T&gt; expectedAction, string assertMessage = null);
Task&lt;IExpectRequest&gt; Expect&lt;T&gt;(this IExpectRequest expect, Action&lt;T&gt; expectedAction, IContentConverter&lt;T&gt; converter, string assertMessage = null); 
</code></pre>

<p>There are two forms of the <strong>Expect</strong> function, one that takes a function of type T that returns a task and the other simply takes an action of type T. The function is used when you need to pass an async lambda for your assertion against the object of type T. Whereas the action is used for simple assertions that do not require async calls. In both cases when you do not provide an <strong>IContentConverter</strong> by default the code will use the <strong>JsonContentConverter<T></strong> and map the HttpResponseMessage&rsquo;s content to JSON. Finally, you have the ability to specify the assertion message that you would like to display if your expectation does not complete successfully.</p>

<p><strong>Example</strong></p>

<pre><code class="language-csharp">class TodoModel
{
    public string Id {get;set;}
    //...
}
//...assertion
await new Request()
    .Get(&quot;http://localhost:8080/api/todo/1&quot;)
    .Next( x =&gt; x.Expect&lt;TodoModel&gt;(model =&gt; {
        Assert.Equal(model.Id, &quot;1&quot;);
    }))
    .Done();

</code></pre>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; ExpectContent(this IExpectRequest expect, string expectedContent);
Task&lt;IExpectRequest&gt; ExpectContent(this IExpectRequest expect, Action&lt;string&gt; expectedContentAction);
</code></pre>

<p><strong>ExpectContent</strong> allows the caller to expect the exact content to match, in the case of the first function, or perform a custom action assertion in the case of the second function.</p>

<p><strong>Example</strong></p>

<pre><code class="language-csharp">await new Request()
    .Get(&quot;http://localhost:8080/api/values/1&quot;)
    .Next( x =&gt; x.ExpectContent(&quot;value&quot;))
    .Done();


await new Request()
    .Get(&quot;http://localhost:8080/api/values/1&quot;)
    .Next( x =&gt; x.ExpectContent( content =&gt; {
        Assert.Equal(content, &quot;value&quot;)
    }))
    .Done();
</code></pre>

<h2 id="request-extensions">Request Extensions</h2>

<h3 id="retrieve-content-extension">Retrieve Content Extension</h3>

<pre><code class="language-csharp">public async static Task&lt;IExpectRequest&gt; GetContent(this IExpectRequest expect, Action&lt;string&gt; contentRetriever);
</code></pre>

<p><strong>GetContent</strong> allows the caller to retrieve the value of the HttpResponseMessage&rsquo;s content.</p>

<p><strong>Example</strong></p>

<pre><code class="language-csharp">string content;
await new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .Next( x =&gt; x.GetContent(c =&gt; content = c))
    .Done();
</code></pre>

<h3 id="verb-extensions">Verb Extensions</h3>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; Get(this IExpectRequest expect, string url);
Task&lt;IExpectRequest&gt; Post&lt;T&gt;(this IExpectRequest expect, string url, T content);
Task&lt;IExpectRequest&gt; Put&lt;T&gt;(this IExpectRequest expect, string url, T content);
Task&lt;IExpectRequest&gt; Post(this IExpectRequest expect, string url, HttpContent content);
Task&lt;IExpectRequest&gt; Put(this IExpectRequest expect, string url, HttpContent content);
Task&lt;IExpectRequest&gt; Delete(this IExpectRequest expect, string url);
</code></pre>

<p>All of the verb functions perform a request against the specified URL provided. These extension method calls remove the need to call <strong>.Request()</strong> first, and simply perform both the request and verb calls.</p>

<p><strong>Example</strong></p>

<pre><code class="language-csharp">await new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .ExpectOk()    
    .Next( x =&gt; x.Delete(&quot;http://localhost:8080/api/todo/1&quot;))
    .Done();

var model = new TodoModel{Title = &quot;title&quot;};
await new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .ExpectOk()
    .Next( x =&gt; x.Post&lt;TodoModel&gt;(&quot;http://localhost:8080/api/todo/1&quot;, model))
    .ExpectOk()    
    .Done();
</code></pre>

<h2 id="header-extensions">Header Extensions</h2>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; ExpectHeader(this IExpectRequest expect, string headerKey);
Task&lt;IExpectRequest&gt; ExpectHeaders(this IExpectRequest expect, IEnumerable&lt;string&gt; headers);

Task&lt;IExpectRequest&gt; ExpectHeader(this IExpectRequest expect, string headerKey, string headerValue);
Task&lt;IExpectRequest&gt; ExpectHeaders(this IExpectRequest expect, Dictionary&lt;string,string&gt; headers);
</code></pre>

<p><strong>ExpectHeader</strong> and <strong>ExpectHeaders</strong> have the ability to either check if a header exists or exist with a specific value.</p>

<pre><code class="language-csharp">new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .ExpectHeader(&quot;Authorization&quot;)
    .Done();    
</code></pre>

<h2 id="statuscode-extensions">StatusCode Extensions</h2>

<pre><code class="language-csharp">Task&lt;IExpectRequest&gt; ExpectStatusCode(this IExpectRequest expect, HttpStatusCode expectedStatusCode);
Task&lt;IExpectRequest&gt; ExpectOk(this IExpectRequest expect);
Task&lt;IExpectRequest&gt; ExpectNotFound(this IExpectRequest expect);
Task&lt;IExpectRequest&gt; ExpectUnavailable(this IExpectRequest expect);
</code></pre>

<p><strong>Examples</strong></p>

<pre><code class="language-csharp">new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .ExpectOk()
    .Done();


new Request()
    .Get(&quot;http://localhost:8080/api/todo&quot;)
    .ExpectStatusCode(HttpStatusCode.OK)
    .Done();    
</code></pre>

<p><strong><a href="https://wright-development.github.io/Expected.Request/api/expect-request">Back to ExpectRequest</a></strong></p>

</div>

</div>
</div>
<script src="https://wright-development.github.io/Expected.Request/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61721549-2', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

