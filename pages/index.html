<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.25.1" />

  <title>Getting Started &middot; Expected.Request</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://wright-development.github.io/Expected.Request/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow-night-eighties.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://wright-development.github.io/Expected.Request/img/favicon.ico" type="image/x-icon" />

  
  

  <style>
    pre {
        overflow: hidden !important;
    }    
</style>
<style>
    pre {
        overflow: hidden !important;
    }
    
    .comment-form {
        font: 95% Arial, Helvetica, sans-serif;
        max-width: 400px;
        margin: 10px auto;
        padding: 16px;
        background: #F7F7F7;
    }

    .comment-form h1 {
        background: #02A854;
        padding: 20px 0;
        font-size: 140%;
        font-weight: 300;
        text-align: center;
        color: #fff;
        margin: -16px -16px 16px -16px;
    }

    .comment-form input[type="text"],
    .comment-form input[type="date"],
    .comment-form input[type="datetime"],
    .comment-form input[type="email"],
    .comment-form input[type="number"],
    .comment-form input[type="search"],
    .comment-form input[type="time"],
    .comment-form input[type="url"],
    .comment-form textarea,
    .comment-form select {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        width: 100%;
        background: #fff;
        margin-bottom: 4%;
        border: 1px solid #ccc;
        padding: 3%;
        color: #555;
        font: 95% Arial, Helvetica, sans-serif;
    }

    .comment-form input[type="text"]:focus,
    .comment-form input[type="date"]:focus,
    .comment-form input[type="datetime"]:focus,
    .comment-form input[type="email"]:focus,
    .comment-form input[type="number"]:focus,
    .comment-form input[type="search"]:focus,
    .comment-form input[type="time"]:focus,
    .comment-form input[type="url"]:focus,
    .comment-form textarea:focus,
    .comment-form select:focus {
        box-shadow: 0 0 5px #02A854;
        padding: 3%;
        border: 1px solid #02A854;
    }

    .comment-form button[type="submit"],
    .comment-form button[type="button"] {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        width: 100%;
        padding: 3%;
        background: #02A854;
        border-bottom: 2px solid #25B46B;
        border-top-style: none;
        border-right-style: none;
        border-left-style: none;
        color: #fff;
    }

    .comment-form button[type="submit"]:hover,
    .comment-form button[type="button"]:hover {
        background: #49C285;
    }

    .comment-form button[type="submit"]:disabled,
    .comment-form button[type="button"]:disabled {
        background: lightgrey;
        border-bottom: grey;
        
    }

</style>
<style>
     
@import url(//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css);
 
.comment-list .row {
background: #F7F7F7;
padding: 0px 25px;
padding-top: 5px;
padding-bottom: 15px;
margin: 25px 0;
}
.comment-list .panel .panel-heading {
padding: 4px 15px;
position: absolute;
border:none;
 
border-top-right-radius:0px;
top: 1px;
}
.comment-list .panel .panel-heading.right {
border-right-width: 0px;
 
border-top-left-radius:0px;
right: 16px;
}
.comment-list .panel .panel-heading .panel-body {
padding-top: 6px;
}
.comment-list figcaption {
 
word-wrap: break-word;
}
 
@media (min-width: 768px) {
.comment-list .arrow:after, .comment-list .arrow:before {
content: "";
position: absolute;
width: 0;
height: 0;
border-style: solid;
border-color: transparent;
}
.comment-list .panel.arrow.left:after, .comment-list .panel.arrow.left:before {
border-left: 0;
}
 
 
.comment-list .panel.arrow.left:before {
left: 0px;
top: 30px;
 
border-right-color: inherit;
border-width: 16px;
}
 
.comment-list .panel.arrow.left:after {
left: 1px;
top: 31px;
 
border-right-color: #FFFFFF;
border-width: 15px;
}
 
 
.comment-list .panel.arrow.right:before {
right: -16px;
top: 30px;
 
border-left-color: inherit;
border-width: 16px;
}
 
.comment-list .panel.arrow.right:after {
right: -14px;
top: 31px;
 
border-left-color: #FFFFFF;
border-width: 15px;
}
}
.comment-list .comment-post {
margin-top: 6px;
}
</style>

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/request/">Request</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/expect-request/">Expect</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/done-request/">Done</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://wright-development.github.io/Expected.Request/api/content-converter/">ContentConverter</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/wright-development/Expected.Request">View On GitHub</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/develop_wright" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/darrius-wright" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/wright-development" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>Wright Development &copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Getting Started</h1>
  <h2></h2>
</div>
<div class="content">
  

<p><img src="https://api.travis-ci.org/wright-development/Expected.Request.svg?branch=master" alt="" /></p>

<p><strong>Documentation in progress. Please notify me of any issues.</strong></p>

<p>Just as the name suggests Expected.Request helps you define what you <strong>expect</strong> out of your requests.</p>

<p>Expected Request is a Fluent API that guides you through your API testing, and it all starts by creating a <strong>new Request</strong>.</p>

<h2 id="installation">Installation</h2>

<p>You can install Expected.Request by copying and pasting the following command into your Package Manager Console within Visual Studio (Tools &gt; NuGet Package Manager &gt; Package Manager Console).</p>

<pre><code>Install-Package Expected.Request
</code></pre>

<p>Or using the .NET Core CLI you can install Expected.Request via the command line interface with the following command:</p>

<pre><code>dotnet add package Expected.Request
</code></pre>

<h2 id="simple-usage">Simple usage</h2>

<pre><code class="language-csharp">var request = new Request();
</code></pre>

<p>Once you have created a request, let the chaining begin! Currently the project supports the four basic requests <strong>Get, Post, Put, and Delete</strong>. Let&rsquo;s try a Post, and we expect to get a status code of ok.</p>

<pre><code class="language-csharp">//assuming we have an api setup
var todoItem = new TodoModel {Text = &quot;Walk the dog&quot;, Done = false };
await request
    .Post(&quot;http://localhost:3000/api/todo&quot;, todoItem)
    .Next( x =&gt; x.ExpectOk())
    .Done();
</code></pre>

<p>Simple right? The idea behind Expected.Request is to test your APIs in a clear and cohesive way. Essentially you should be able to read your API tests. In this example we create a new request, post to the todo API with our model, then once the post is complete we expect the status code to be ok, and finally, we call done. Calling done at the end ensures that everything is disposed of properly.</p>

<h2 id="more-complex-usage">More complex usage</h2>

<p>Alright, let&rsquo;s get into a more complex example. We&rsquo;ll post a model to the todo api, then use the id we will retrieve the content response from the API, and finally, perform some assertions on the object.</p>

<pre><code class="language-csharp">var apiUrl = &quot;http://localhost:3000/api/todo&quot;;
var todoItem = new TodoModel {Text = &quot;Walk the dog&quot;, Done = false };

string id = &quot;&quot;;

await new Request()
    .Post(apiUrl, todoItem)
    .Next(x =&gt; x.Map&lt;TodoModel&gt;(model=&gt;id = model.Id))
    .Next(x =&gt; x.ExpectOk())
    .Next(x =&gt; x.Get($&quot;{apiUrl}/{id}&quot;))
    .Next(x =&gt; x.ExpectOk())
    .Next(x =&gt; x.Expect&lt;TodoModel&gt;(model=&gt; {
        Assert.Equal(model.Id, id);
        Assert.Equal(model.Checked, todoItem.Checked);
        Assert.Equal(model.Text, todoItem.Text);
    }))
    .Done();
</code></pre>

<p>Once again with a few calls, we have a fairly self-explanatory API test.</p>

<h2 id="using-with-microsoft-s-testserver">Using with Microsoft&rsquo;s TestServer</h2>

<p>Expected.Request also works well with the TestServer class that Microsoft provides in their Microsoft.AspNetCore.TestHost package. Once you have instantiated the TestServer, provide a new client to the request. Then feel free to chain your calls as you would normally.</p>

<p><strong>For more information about TestServer head over to Microsoft&rsquo;s <a href="https://docs.microsoft.com/en-us/aspnet/core/testing/integration-testing">documentation</a></strong></p>

<pre><code class="language-csharp">public class ValuesApiTests
{
    private readonly TestServer _server;
    private readonly HttpClient _client;
    public ValuesApiTests()
    {
        _server = new TestServer(new WebHostBuilder()
            .UseStartup&lt;Startup&gt;());
        _client = _server.CreateClient();
    }

    [Fact]
    public async Task check_api_values()
    {
        await new Request(_client)
            .Get(&quot;/api/values&quot;)
            .Next( x =&gt; x.ExpectOk())
            .Next( x =&gt; x.Expect&lt;IEnumerable&lt;string&gt;&gt;((reponse)=&gt;{
                Assert.Equal(reponse.ElementAt(0),&quot;value1&quot;);
                Assert.Equal(reponse.ElementAt(1),&quot;value2&quot;);
            }))
            .Done();
    }
}
</code></pre>

<p><strong>If you have any questions or suggestions for this project feel free to post an <a href="https://github.com/wright-development/Expected.Request/issues">issue on github</a>.</strong></p>

</div>

</div>
</div>
<script src="https://wright-development.github.io/Expected.Request/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61721549-2', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

